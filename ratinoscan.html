{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="{%static 'assets/img/apple-icon.png' %}">
  <link rel="icon" type="image/png" href="{%static 'assets/img/ratinoscan.png' %}">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta content="Diabetes Retinopathy Detection App" name="descriptison">
  <!-- <meta content="covid19, covid, corona virus, Lungs Cancer, xrays, ct-scan " name="keywords"> -->
  <meta name="author" content="RatinoScan">
  <meta name="generator" content="Prototype 1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    RetinoScan
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />

  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

  <!-- CSS Files -->
  <link href="{%static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />
  <link href="{%static 'assets/css/paper-kit.css' %}" rel="stylesheet" />

  <style>
    #upload {
      opacity: 0;
    }

    #upload-label {
      position: absolute;
      top: 50%;
      left: 1rem;
      transform: translateY(-50%);
    }

    .image-area {
      border: 2px dashed rgba(255, 255, 255, 0.7);
      padding: 1rem;
      position: relative;
    }

    .image-area::before {
      content: 'Uploaded image result';
      color: #fff;
      font-weight: bold;
      text-transform: uppercase;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.8rem;
      z-index: 1;
    }

    .image-area img {
      z-index: 2;
      position: relative;
    }
  </style>

</head>

<body class="landing-page sidebar-collapse">
  <!-- Navbar -->

  {% if result %}

  <div class="section section-dark text-center landing-section" id="demo">
    <div class="container">
      <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
        <h1 class="display-4 text-light">Result</h1>
        <p class="lead text-light">This is only protype version, please don't consider it as Final Product.</p>
        <!-- <small>Itâ€™s built with default Bootstrap components and utilities with little customization.</small> -->
      </div>
      <div class="col-lg-12">
        <div
          class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative text-left">
          <div class="col p-4 d-flex flex-column position-static">
            <h4 class="d-inline-block mb-2 text-{{colour}}">ID: {{id}}</h4>
            <!-- <h3 class="mb-0 text-light">Paitent Age: {{ age }}</h3> -->
            <div class="mt-2 text-light">
              <h5>
                <script>
                  var today = new Date()
                  document.write(today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today
                    .getDate() + ', ' + today.getHours() + ":" + today.getMinutes() + ":" +
                    today.getSeconds())
                </script>
              </h5>
            </div>
            <p class="mb-auto mt-1 text-light">{{message}} <strong>{{result}}</strong> {{message2}}</p>
            <p class="mb-auto text-warning"><strong>{{symptoms}}</strong></p>
            <a href="/ratinoscan/" class="stretched-link text-danger"><strong>Test another image</strong></a>
          </div>
          <div class="col-auto d-none d-lg-block">
            <img src="{{path}}" width="280" height="250">
          </div>
          <!-- <div class="col-auto d-none d-lg-block">
                <img src="{{resultImage}}" width="280" height="250">
            </div> -->

        </div>
      </div>
    </div>
  </div>
  {% else %}
  <nav class="navbar navbar-expand-lg nav-down navbar-absolute navbar-transparent">
    <div class="container">
      <div class="navbar-translate">
        <a class="navbar-brand" href="/ratinoscan/" rel="tooltip" title="RetinoScan" data-placement="bottom">
          RetinoScan
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-bar bar1"></span>
          <span class="navbar-toggler-bar bar2"></span>
          <span class="navbar-toggler-bar bar3"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" data-nav-image="{%static 'assets/img/bg.jpg' %}" data-color="orange">
        <ul class="navbar-nav ml-auto">
          <li class="dropdown nav-item">
            <a href="/demo/" class="nav-link" aria-expanded="false">Home </a>
          </li>
          <li class="dropdown nav-item">
            <a href="#demo" class="nav-link" aria-expanded="false">Demo </a>
          </li>
          <li class="dropdown nav-item">
            <a href="#contact" class="nav-link" aria-expanded="false">Contact Us </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Navbar -->
  <div class="page-header" data-parallax="true"
    style="background-image: linear-gradient(to right bottom,rgba(48, 45, 45, 0.516), rgba(48, 48, 48, 0.427)), url( {% static 'assets/img/bg.jpg' %} );">
    <!-- <img src="{%static 'assets/img/bg.jpg' %}" style="background-repeat: no-repeat; background-attachment: fixed; alt="bg"> -->
    <div class="filter"></div>
    <div class="content-center">
      <div class="container">
        <div class="motto">
          <h1 class="title">RetinoScan</h1>
          <h3 class="description">Diabetes Retinopathy Detection App.</h3>
          <br />
          <a href="#demo" class="btn btn-outline-neutral btn-round">Try Demo</a>
        </div>
      </div>
    </div>
  </div>
  <div class="wrapper">

    <div class="section text-center landing-section">
      <div class="container">
        <div class="row">
          <div class="col-md-8 ml-auto mr-auto">
            <h2 class="title">Let's talk product</h2>
            <h5>RatinoScan is platform which can detects the symptoms of Diabetes Retinopathy using fundus image and
              shows area effected by Microaneurysms, Hemorrhages & exudates.</h5>
            <br />
            <!-- <a href="#paper-kit" class="btn btn-danger btn-fill btn-round">See Details</a> -->
            <img src="{%static 'assets/img/Output.png' %}" width="100%" alt="">
            <small><span class="text-danger">*</span>These are the result demonstration of the platform. </small>
          </div>
        </div>
        <br /><br />
      </div>
    </div>
    <div class="section section-dark text-center landing-section" id="demo">
      <div class="container">
        <h2 class="title">RetinoScan Demo</h2>
      </div>
      <div class="container py-3">

        <!-- For demo purpose -->
        <header class="text-white text-center">
          <p class="lead mb-0">Please upload original images, for better results.</p>
        </header>
        <div class="row py-5">
          <div class="col-lg-6 mx-auto">
            <form method="POST" action="drResult" enctype="multipart/form-data">
              {% csrf_token %}
              <!-- Upload image input-->
              <div class="input-group mb-5 px-2 py-2 rounded-pill bg-white shadow-sm">
                <input id="upload" name="drImage" type="file" onchange="readURL(this);" class="form-control border-0"
                  required>
                <label id="upload-label" for="upload" class="font-weight-light text-muted">Choose file</label>
                <div class="input-group-append">
                  <label for="upload" class="btn btn-light m-0 rounded-pill px-4"> <i
                      class="fa fa-cloud-upload mr-2 text-light"></i><small
                      class="text-uppercase font-weight-bold text-light">Select File</small></label>
                </div>
              </div>

              <!-- Uploaded image area-->
              <p class="font-italic text-white text-center">
                The image uploaded will be rendered inside the box below.
              </p>
              <div class="image-area mt-4 pt-4"><img id="imageResult" src="#" alt=""
                  class="img-fluid rounded shadow-sm mx-auto d-block">
              </div>

              <button type="submit" class="btn btn-neutral btn-round mt-5">Upload</button>
            </form>
          </div>
        </div>
      </div>

      {% endif %}



    </div>
  </div>
  <div id="contact" class="section landing-section">
    <div class="container">
      <div class="row">
        <div class="col-md-8 ml-auto mr-auto">
          <h2 class="text-center">Contact Us</h2>
          <form class="contact-form" action="contact" method="post">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6">
                <label>Name</label>
                <input class="form-control" name="name" placeholder="Name">
              </div>
              <div class="col-md-6">
                <label>Email</label>
                <input class="form-control" name="email" placeholder="Email">
              </div>
            </div>
            <label>Subject</label>
            <input class="form-control" name="subject" placeholder="Subject">
            <label>Message</label>
            <textarea class="form-control" name="message" rows="4" placeholder="Tell us your thoughts and feelings..."></textarea>
            <div class="row">
              <div class="col-md-4 offset-md-4">
                <button type="submit" class="btn btn-danger btn-lg btn-fill">Send Message</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  </div>
  <footer class="footer footer-white ">
    <div class="container">
      <div class="row">
        <nav class="footer-nav">
          <ul>
            <li><a href="/ratinoscan/">RetinoScan</a></li>
          </ul>
        </nav>
        <div class="credits ml-auto">
          <span class="copyright">
            Â© <script>
              document.write(new Date().getFullYear())
            </script>, made with <i class="fa fa-heart heart"></i> by RatinoScan
          </span>
        </div>
      </div>
    </div>
  </footer>

  <script>
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#imageResult')
            .attr('src', e.target.result);
        };
        reader.readAsDataURL(input.files[0]);
      }
    }

    (function () {
      $('#upload').on('change', function () {
        readURL(input);
      });
    });

    var input = document.getElementById('upload');
    var infoArea = document.getElementById('upload-label');

    input.addEventListener('change', showFileName);

    function showFileName(event) {
      var input = event.srcElement;
      var fileName = input.files[0].name;
      console.log(fileName)
      infoArea.innerHTML = 'File name: ' + fileName;
    }
  </script>

  <!--   Core JS Files   -->
  <script src="{%static 'assets/js/core/jquery.min.js' %}" type="text/javascript"></script>
  <script src="{%static 'assets/js/core/bootstrap.min.js' %}" type="text/javascript"></script>
  <script src="{%static 'assets/js/paper-kit.js' %}" type="text/javascript"></script>
</body>

</html>